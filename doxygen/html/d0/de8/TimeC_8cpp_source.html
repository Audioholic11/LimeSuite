<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>LimeSuite-UML: /home/erik/prefix/default/src/soapysdr/lib/TimeC.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LimeSuite-UML
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_43e0a1f539e00dcfa1a6bc4d4fee4fc2.html">home</a></li><li class="navelem"><a class="el" href="../../dir_cf764c42155f97c8834fa9e0239058a2.html">erik</a></li><li class="navelem"><a class="el" href="../../dir_8bf104421d777a119379982ba15bc917.html">prefix</a></li><li class="navelem"><a class="el" href="../../dir_39c8bc37e19f05461b414d975c570109.html">default</a></li><li class="navelem"><a class="el" href="../../dir_b4804201d5ae79dd9b765c673f6732d6.html">src</a></li><li class="navelem"><a class="el" href="../../dir_5fdd47fbc85b9dbc92cc4d63488a34f7.html">soapysdr</a></li><li class="navelem"><a class="el" href="../../dir_d61073c2949e064096365076d71e4557.html">lib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">TimeC.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d0/de8/TimeC_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright (c) 2015-2015 Josh Blum</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// SPDX-License-Identifier: BSL-1.0</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d2/d33/Time_8h.html">SoapySDR/Time.h</a>&gt;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; (_MSC_VER &lt; 1800)</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> llround(<span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../db/d82/wglew_8h.html#ad77deca22f617d3f0e0eb786445689fc">x</a>)</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;{</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>)((x &lt; (0.0)) ? (x - (0.5)) : (x + (0.5)));</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;}</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="../../d0/de8/TimeC_8cpp.html#aa6f2b0c4aa2789294a03c003cc309c21">   18</a></span>&#160;<span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="../../d0/de8/TimeC_8cpp.html#aa6f2b0c4aa2789294a03c003cc309c21">SoapySDR_ticksToTimeNs</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> ticks, <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../d8/d80/group__FN__HIGH__LVL.html#ga5d61e49188751964caec6d4096a168d1">rate</a>)</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;{</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> ratell = (<span class="keywordtype">long</span> long)(rate);</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> full = (<span class="keywordtype">long</span> long)(ticks/ratell);</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> err = ticks - (full*ratell);</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../d6/d5b/LICENSE__1__0_8txt.html#aaa59da54a97b56480c5d5c61e3fbfbe3">part</a> = full*(rate - ratell);</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> frac = ((err - <a class="code" href="../../d6/d5b/LICENSE__1__0_8txt.html#aaa59da54a97b56480c5d5c61e3fbfbe3">part</a>)*1000000000)/<a class="code" href="../../d8/d80/group__FN__HIGH__LVL.html#ga5d61e49188751964caec6d4096a168d1">rate</a>;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="keywordflow">return</span> (full*1000000000) + llround(frac);</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;}</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="../../d0/de8/TimeC_8cpp.html#ad2eadcbe8dbb12bcbc47685633d08165">   28</a></span>&#160;<span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="../../d0/de8/TimeC_8cpp.html#ad2eadcbe8dbb12bcbc47685633d08165">SoapySDR_timeNsToTicks</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> timeNs, <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../d8/d80/group__FN__HIGH__LVL.html#ga5d61e49188751964caec6d4096a168d1">rate</a>)</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;{</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> ratell = (<span class="keywordtype">long</span> long)(rate);</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> full = (<span class="keywordtype">long</span> long)(timeNs/1000000000);</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> err = timeNs - (full*1000000000);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../d6/d5b/LICENSE__1__0_8txt.html#aaa59da54a97b56480c5d5c61e3fbfbe3">part</a> = full*(rate - ratell);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> frac = part + ((err*<a class="code" href="../../d8/d80/group__FN__HIGH__LVL.html#ga5d61e49188751964caec6d4096a168d1">rate</a>)/1000000000);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordflow">return</span> (full*ratell) + llround(frac);</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;}</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div><div class="ttc" id="Time_8h_html"><div class="ttname"><a href="../../d2/d33/Time_8h.html">Time.h</a></div><div class="ttdoc">Utility functions to convert time and ticks. </div></div>
<div class="ttc" id="TimeC_8cpp_html_ad2eadcbe8dbb12bcbc47685633d08165"><div class="ttname"><a href="../../d0/de8/TimeC_8cpp.html#ad2eadcbe8dbb12bcbc47685633d08165">SoapySDR_timeNsToTicks</a></div><div class="ttdeci">long long SoapySDR_timeNsToTicks(const long long timeNs, const double rate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de8/TimeC_8cpp_source.html#l00028">TimeC.cpp:28</a></div></div>
<div class="ttc" id="LICENSE__1__0_8txt_html_aaa59da54a97b56480c5d5c61e3fbfbe3"><div class="ttname"><a href="../../d6/d5b/LICENSE__1__0_8txt.html#aaa59da54a97b56480c5d5c61e3fbfbe3">part</a></div><div class="ttdeci">Boost Software License Version Permission is hereby free of to any person or organization obtaining a copy of the software and accompanying documentation covered by this and transmit the and to prepare derivative works of the and to permit third parties to whom the Software is furnished to do all subject to the including the above license this restriction and the following must be included in all copies of the in whole or in part</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d5b/LICENSE__1__0_8txt_source.html#l00005">LICENSE_1_0.txt:5</a></div></div>
<div class="ttc" id="TimeC_8cpp_html_aa6f2b0c4aa2789294a03c003cc309c21"><div class="ttname"><a href="../../d0/de8/TimeC_8cpp.html#aa6f2b0c4aa2789294a03c003cc309c21">SoapySDR_ticksToTimeNs</a></div><div class="ttdeci">long long SoapySDR_ticksToTimeNs(const long long ticks, const double rate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de8/TimeC_8cpp_source.html#l00018">TimeC.cpp:18</a></div></div>
<div class="ttc" id="wglew_8h_html_ad77deca22f617d3f0e0eb786445689fc"><div class="ttname"><a href="../../db/d82/wglew_8h.html#ad77deca22f617d3f0e0eb786445689fc">x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/wglew_8h_source.html#l00174">wglew.h:174</a></div></div>
<div class="ttc" id="group__FN__HIGH__LVL_html_ga5d61e49188751964caec6d4096a168d1"><div class="ttname"><a href="../../d8/d80/group__FN__HIGH__LVL.html#ga5d61e49188751964caec6d4096a168d1">rate</a></div><div class="ttdeci">float_type rate</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/LimeSuite_8h_source.html#l00231">LimeSuite.h:231</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jul 23 2018 14:09:13 for LimeSuite-UML by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
