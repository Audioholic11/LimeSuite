\subsection{qa\+\_\+transpose\+\_\+matrix\+\_\+vcvc.\+py}
\label{qa__transpose__matrix__vcvc_8py_source}\index{/home/erik/prefix/default/src/gr-\/radar-\/dev/python/qa\+\_\+transpose\+\_\+matrix\+\_\+vcvc.\+py@{/home/erik/prefix/default/src/gr-\/radar-\/dev/python/qa\+\_\+transpose\+\_\+matrix\+\_\+vcvc.\+py}}

\begin{DoxyCode}
00001 \textcolor{comment}{#!/usr/bin/env python}
00002 \textcolor{comment}{# -*- coding: utf-8 -*-}
00003 \textcolor{comment}{# }
00004 \textcolor{comment}{# Copyright 2014 Communications Engineering Lab, KIT.}
00005 \textcolor{comment}{# }
00006 \textcolor{comment}{# This is free software; you can redistribute it and/or modify}
00007 \textcolor{comment}{# it under the terms of the GNU General Public License as published by}
00008 \textcolor{comment}{# the Free Software Foundation; either version 3, or (at your option)}
00009 \textcolor{comment}{# any later version.}
00010 \textcolor{comment}{# }
00011 \textcolor{comment}{# This software is distributed in the hope that it will be useful,}
00012 \textcolor{comment}{# but WITHOUT ANY WARRANTY; without even the implied warranty of}
00013 \textcolor{comment}{# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}
00014 \textcolor{comment}{# GNU General Public License for more details.}
00015 \textcolor{comment}{# }
00016 \textcolor{comment}{# You should have received a copy of the GNU General Public License}
00017 \textcolor{comment}{# along with this software; see the file COPYING.  If not, write to}
00018 \textcolor{comment}{# the Free Software Foundation, Inc., 51 Franklin Street,}
00019 \textcolor{comment}{# Boston, MA 02110-1301, USA.}
00020 \textcolor{comment}{# }
00021 
00022 \textcolor{keyword}{from} gnuradio \textcolor{keyword}{import} gr, gr\_unittest
00023 \textcolor{keyword}{from} gnuradio \textcolor{keyword}{import} blocks
00024 \textcolor{keyword}{import} radar\_swig \textcolor{keyword}{as} radar
00025 
00026 \textcolor{keyword}{class }qa_transpose_matrix_vcvc (gr\_unittest.TestCase):
00027 
00028     \textcolor{keyword}{def }setUp (self):
00029         self.tb = gr.top\_block ()
00030 
00031     \textcolor{keyword}{def }tearDown (self):
00032         self.tb = \textcolor{keywordtype}{None}
00033 
00034     \textcolor{keyword}{def }test_001_t (self):
00035         \textcolor{comment}{# set up fg}
00036         \textcolor{comment}{# check samples on output}
00037         test\_len = 12
00038         in\_data = range(test\_len)
00039         vlen\_in = 3
00040         vlen\_out = 4
00041         
00042         src = blocks.vector\_source\_c(in\_data)
00043         stv = blocks.stream\_to\_vector(8,vlen\_in)
00044         s2ts = blocks.stream\_to\_tagged\_stream(8,vlen\_in,test\_len/vlen\_in,\textcolor{stringliteral}{'packet\_len'})
00045         transpose = radar.transpose\_matrix\_vcvc(vlen\_in,vlen\_out,\textcolor{stringliteral}{'packet\_len'})
00046         vts = blocks.vector\_to\_stream(8,vlen\_out)
00047         snk = blocks.vector\_sink\_c()
00048         
00049         self.tb.connect(src,stv,s2ts,transpose,vts,snk)
00050         self.tb.run()
00051         
00052         \textcolor{comment}{# check data}
00053         out\_data = snk.data()
00054         ref\_data = [0]*len(in\_data)
00055         counter = 0;
00056         \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} range(vlen\_in):
00057             \textcolor{keywordflow}{for} l \textcolor{keywordflow}{in} range(test\_len/vlen\_in):
00058                 ref\_data[counter] = in\_data[l*vlen\_in+k]
00059                 counter = counter+1
00060             
00061         out\_data\_real = [0]*len(in\_data)
00062         \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} range(len(in\_data)):
00063             out\_data\_real[k] = out\_data[k].real
00064                 
00065         \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} range(len(out\_data\_real)):
00066             self.assertEqual(out\_data\_real[k],ref\_data[k])
00067             
00068     \textcolor{keyword}{def }test_002_t (self):
00069         \textcolor{comment}{# set up fg}
00070         \textcolor{comment}{# check on reverse by using two times}
00071         test\_len = 12
00072         in\_data = range(test\_len)
00073         vlen\_in = 3
00074         vlen\_out = 4
00075         
00076         src = blocks.vector\_source\_c(in\_data)
00077         stv = blocks.stream\_to\_vector(8,vlen\_in)
00078         s2ts = blocks.stream\_to\_tagged\_stream(8,vlen\_in,test\_len/vlen\_in,\textcolor{stringliteral}{'packet\_len'})
00079         transpose1 = radar.transpose\_matrix\_vcvc(vlen\_in,vlen\_out,\textcolor{stringliteral}{'packet\_len'})
00080         transpose2 = radar.transpose\_matrix\_vcvc(vlen\_out,vlen\_in,\textcolor{stringliteral}{'packet\_len'})
00081         vts = blocks.vector\_to\_stream(8,vlen\_in)
00082         snk = blocks.vector\_sink\_c()
00083         vts2 = blocks.vector\_to\_stream(8,vlen\_out)
00084         snk2 = blocks.vector\_sink\_c()
00085         
00086         self.tb.connect(src,stv,s2ts,transpose1,transpose2,vts,snk)
00087         self.tb.connect(transpose1,vts2,snk2)
00088         self.tb.run()
00089         
00090         \textcolor{comment}{# check data}
00091         out\_data\_real = [0]*len(in\_data)
00092         out\_data = snk.data()
00093         \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} range(len(in\_data)):
00094             out\_data\_real[k] = out\_data[k].real
00095             
00096         \textcolor{keywordflow}{print} \textcolor{stringliteral}{"Input data:"}, in\_data
00097         \textcolor{keywordflow}{print} \textcolor{stringliteral}{"Output data:"}, out\_data\_real
00098         \textcolor{keywordflow}{print} \textcolor{stringliteral}{"Transpose data:"}, snk2.data()
00099             
00100         \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} range(len(out\_data\_real)):
00101             self.assertEqual(out\_data\_real[k],in\_data[k])
00102 
00103 
00104 \textcolor{keywordflow}{if} \_\_name\_\_ == \textcolor{stringliteral}{'\_\_main\_\_'}:
00105     gr\_unittest.run(qa\_transpose\_matrix\_vcvc)\textcolor{comment}{#, "qa\_transpose\_matrix\_vcvc.xml")}
\end{DoxyCode}
