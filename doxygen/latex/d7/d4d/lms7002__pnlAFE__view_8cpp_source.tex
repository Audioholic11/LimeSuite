\subsection{lms7002\+\_\+pnl\+A\+F\+E\+\_\+view.\+cpp}
\label{lms7002__pnlAFE__view_8cpp_source}\index{/home/erik/prefix/default/src/limesuite-\/dev/src/lms7002\+\_\+wxgui/lms7002\+\_\+pnl\+A\+F\+E\+\_\+view.\+cpp@{/home/erik/prefix/default/src/limesuite-\/dev/src/lms7002\+\_\+wxgui/lms7002\+\_\+pnl\+A\+F\+E\+\_\+view.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include "lms7002_pnlAFE_view.h"}
00002 \textcolor{preprocessor}{#include <map>}
00003 \textcolor{preprocessor}{#include "lms7002_gui_utilities.h"}
00004 \textcolor{keyword}{using namespace }lime;
00005 
00006 lms7002_pnlAFE_view::lms7002_pnlAFE_view( wxWindow* parent )
00007 :
00008 pnlAFE_view( parent )
00009 \{
00010 
00011 \}
00012 
00013 lms7002_pnlAFE_view::lms7002_pnlAFE_view( wxWindow* parent, wxWindowID \textcolor{keywordtype}{id}, \textcolor{keyword}{const} wxPoint& pos, \textcolor{keyword}{const} wxSize
      & size, \textcolor{keywordtype}{long} style )
00014     : pnlAFE_view(parent, id, pos, size, style), lmsControl(nullptr)
00015 \{
00016     wndId2Enum[chkEN_G_AFE] = LMS7param(EN_G_AFE);
00017     wndId2Enum[cmbISEL_DAC_AFE] = LMS7param(ISEL_DAC_AFE);
00018     wndId2Enum[rgrMODE_INTERLEAVE_AFE] = LMS7param(MODE_INTERLEAVE_AFE);
00019     wndId2Enum[cmbMUX_AFE_1] = LMS7param(MUX_AFE_1);
00020     wndId2Enum[cmbMUX_AFE_2] = LMS7param(MUX_AFE_2);
00021     wndId2Enum[chkPD_AFE] = LMS7param(PD_AFE);
00022     wndId2Enum[chkPD_RX_AFE1] = LMS7param(PD_RX_AFE1);
00023     wndId2Enum[chkPD_RX_AFE2] = LMS7param(PD_RX_AFE2);
00024     wndId2Enum[chkPD_TX_AFE1] = LMS7param(PD_TX_AFE1);
00025     wndId2Enum[chkPD_TX_AFE2] = LMS7param(PD_TX_AFE2);
00026 
00027     wxArrayString temp;
00028     temp.clear();
00029     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i<8; ++i)
00030     \{
00031         temp.push\_back(wxString::Format(\_(\textcolor{stringliteral}{"%i uA"}), 325 + i * 75)); \textcolor{comment}{//nominal 625uA}
00032     \}
00033     cmbISEL_DAC_AFE->Set(temp);
00034 
00035     temp.clear();
00036     temp.push\_back(\_(\textcolor{stringliteral}{"PGA output is connected to ADC input"}));
00037     temp.push\_back(\_(\textcolor{stringliteral}{"pdet\_1 is connected to ADC ch. 1"}));
00038     temp.push\_back(\_(\textcolor{stringliteral}{"BIAS\_TOP test outputs will be connected to ADC ch.1 input"}));
00039     temp.push\_back(\_(\textcolor{stringliteral}{"RSSI 1 output will be connected to ADC 1 input"}));
00040     cmbMUX_AFE_1->Set(temp);
00041 
00042     temp.clear();
00043     temp.push\_back(\_(\textcolor{stringliteral}{"PGA output is connected to ADC input"}));
00044     temp.push\_back(\_(\textcolor{stringliteral}{"pdet\_2 is connected to ADC channel 2"}));
00045     temp.push\_back(\_(\textcolor{stringliteral}{"RSSI 1 output will be connected to ADC 2 input"}));
00046     temp.push\_back(\_(\textcolor{stringliteral}{"RSSI 2 output will be connected to ADC 2 input"}));
00047     cmbMUX_AFE_2->Set(temp);
00048 
00049     LMS7002_WXGUI::UpdateTooltips(wndId2Enum, \textcolor{keyword}{true});
00050 \}
00051 
00052 \textcolor{keywordtype}{void} lms7002_pnlAFE_view::Initialize(lms_device_t* pControl)
00053 \{
00054     lmsControl = pControl;
00055     assert(lmsControl != \textcolor{keyword}{nullptr});
00056 \}
00057 
00058 \textcolor{keywordtype}{void} lms7002_pnlAFE_view::ParameterChangeHandler(wxCommandEvent& event)
00059 \{
00060     assert(lmsControl != \textcolor{keyword}{nullptr});
00061     LMS7Parameter parameter;
00062     \textcolor{keywordflow}{try}
00063     \{
00064         parameter = wndId2Enum.at(reinterpret\_cast<wxWindow*>(event.GetEventObject()));
00065     \}
00066     \textcolor{keywordflow}{catch} (std::exception & e)
00067     \{
00068         std::cout << \textcolor{stringliteral}{"Control element(ID = "} << \textcolor{keyword}{event}.GetId() << \textcolor{stringliteral}{") don't have assigned LMS parameter."} << 
      std::endl;
00069         \textcolor{keywordflow}{return};
00070     \}
00071     LMS_WriteParam(lmsControl,parameter,event.GetInt());
00072 \}
00073 
00074 \textcolor{keywordtype}{void} lms7002_pnlAFE_view::UpdateGUI()
00075 \{
00076     LMS7002_WXGUI::UpdateControlsByMap(\textcolor{keyword}{this}, lmsControl, wndId2Enum);
00077 \}
\end{DoxyCode}
