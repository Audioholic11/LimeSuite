\subsection{lms7002\+\_\+pnl\+M\+C\+U\+\_\+\+B\+D\+\_\+view.\+h}
\label{lms7002__pnlMCU__BD__view_8h_source}\index{/home/erik/prefix/default/src/limesuite-\/dev/src/lms7002\+\_\+wxgui/lms7002\+\_\+pnl\+M\+C\+U\+\_\+\+B\+D\+\_\+view.\+h@{/home/erik/prefix/default/src/limesuite-\/dev/src/lms7002\+\_\+wxgui/lms7002\+\_\+pnl\+M\+C\+U\+\_\+\+B\+D\+\_\+view.\+h}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#ifndef \_\_lms7002\_pnlMCU\_BD\_view\_\_}
00002 \textcolor{preprocessor}{#define \_\_lms7002\_pnlMCU\_BD\_view\_\_}
00003 
00009 \textcolor{preprocessor}{#include "lms7002_wxgui.h"}
00010 
00012 \textcolor{preprocessor}{#include <wx/timer.h>}
00013 \textcolor{preprocessor}{#include <thread>}
00014 \textcolor{preprocessor}{#include "lime/LimeSuite.h"}
00015 
00017 \textcolor{keyword}{class }lms7002_pnlMCU_BD_view : \textcolor{keyword}{public} pnlMCU_BD_view
00018 \{
00019     \textcolor{keyword}{protected}:
00020         \textcolor{comment}{// Handlers for pnlMCU\_BD\_view events.}
00021         \textcolor{keywordtype}{void} OnButton_LOADHexClick( wxCommandEvent& event );
00022         \textcolor{keywordtype}{void} OnchkResetClick( wxCommandEvent& event );
00023         \textcolor{keywordtype}{void} OnbtnStartProgrammingClick( wxCommandEvent& event );
00024         \textcolor{keywordtype}{void} OnbtnLoadTestFileClick( wxCommandEvent& event );
00025         \textcolor{keywordtype}{void} OnbtnRunTestClick( wxCommandEvent& event );
00026         \textcolor{keywordtype}{void} OnDebugModeClick( wxCommandEvent& event );
00027         \textcolor{keywordtype}{void} OnRunInstruction( wxCommandEvent& event );
00028         \textcolor{keywordtype}{void} OnResetPCClick( wxCommandEvent& event );
00029         \textcolor{keywordtype}{void} OnViewSFRsClick( wxCommandEvent& event );
00030         \textcolor{keywordtype}{void} OnViewIRAMClick( wxCommandEvent& event );
00031         \textcolor{keywordtype}{void} OnEraseIRAMClick( wxCommandEvent& event );
00032         \textcolor{keywordtype}{void} OnSelDivSelect( wxCommandEvent& event );
00033         \textcolor{keywordtype}{void} Onm_cCtrlBasebandSelect( wxCommandEvent& event );
00034         \textcolor{keywordtype}{void} Onm_cCtrlMCU_BDSelect( wxCommandEvent& event );
00035         \textcolor{keywordtype}{void} OnRegWriteRead( wxCommandEvent& event );
00036         \textcolor{keywordtype}{void} OnbtnRunProductionTestClicked(wxCommandEvent& event);
00037     \textcolor{keyword}{public}:
00039         lms7002_pnlMCU_BD_view( wxWindow* parent );
00041         ~lms7002_pnlMCU_BD_view();
00042         \textcolor{keywordtype}{void} Initialize(lms_device_t *ptr);
00043 \textcolor{keyword}{protected}:
00044     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} max_array_size = 16 * 1024;
00045     \textcolor{keywordtype}{int} GetProgramCode(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* inFileName, \textcolor{keywordtype}{bool} bin);
00046     \textcolor{keywordtype}{void} RunTest_MCU(\textcolor{keywordtype}{int} m_iMode1, \textcolor{keywordtype}{int} m_iMode0, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} test\_code, \textcolor{keywordtype}{int} 
      m_iDebug);
00047     \textcolor{keywordtype}{void} Wait_CLK_Cycles(\textcolor{keywordtype}{int} delay);
00048     \textcolor{keywordtype}{void} DebugModeSet_MCU(\textcolor{keywordtype}{int} m_iMode1, \textcolor{keywordtype}{int} m_iMode0);
00049     \textcolor{keywordtype}{void} DebugModeExit_MCU(\textcolor{keywordtype}{int} m_iMode1, \textcolor{keywordtype}{int} m_iMode0);
00050     \textcolor{keywordtype}{int} ResetPC_MCU();
00051     \textcolor{keywordtype}{int} Change_MCUFrequency(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} data);
00052     \textcolor{keywordtype}{int} One_byte_command(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} data1, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} * rdata1);
00053     \textcolor{keywordtype}{int} Three_byte_command(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} data1,\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} data2,\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} data3,
00054         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} * rdata1,\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} * rdata2,\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} * rdata3);
00055     \textcolor{keyword}{static} \textcolor{keywordtype}{bool} OnProgrammingCallback(\textcolor{keywordtype}{int} bsent, \textcolor{keywordtype}{int} btotal, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* progressMsg);
00056     \textcolor{keywordtype}{void} OnProgramingStatusUpdate(wxCommandEvent& event);
00057     \textcolor{keywordtype}{int} WaitUntilWritten();
00058     \textcolor{keywordtype}{int} RunProductionTest_MCU();
00059     \textcolor{keywordtype}{int} Read_IRAM();
00060     \textcolor{keywordtype}{int} ReadOneByte(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} * data);
00061     \textcolor{keywordtype}{int} Read_SFR();
00062     \textcolor{keywordtype}{int} Erase_IRAM();
00063     \textcolor{keywordtype}{int} RunInstr_MCU(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} * pPCVAL);
00064     \textcolor{keywordtype}{void} OnReadIRAMfinished(wxThreadEvent &event);
00065     \textcolor{keywordtype}{void} OnEraseIRAMfinished(wxThreadEvent &event);
00066     \textcolor{keywordtype}{void} OnReadSFRfinished(wxThreadEvent &event);
00067     \textcolor{keywordtype}{void} OnProgrammingfinished(wxThreadEvent &event);
00068     \textcolor{keywordtype}{bool} mThreadWorking;
00069     std::thread mWorkerThread;
00070     wxTimer* progressPooler;
00071     lms_device_t* lmsControl;
00072     \textcolor{keywordtype}{int} m_iTestNo;
00073     \textcolor{keywordtype}{int} m_iInstrNo;
00074     \textcolor{keywordtype}{int} m_iPCvalue;
00075     \textcolor{keywordtype}{int} m_iDebug;
00076     \textcolor{keywordtype}{int} m_iMode0;
00077     \textcolor{keywordtype}{int} m_iMode1;
00078 
00079     \textcolor{keywordtype}{int} m_iTestResultFileLine;
00080     \textcolor{keywordtype}{int} TestResultArray_code[256];
00081     \textcolor{keywordtype}{int} TestResultArray_address[256];
00082     \textcolor{keywordtype}{int} TestResultArray_value[256];
00083 
00084     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} m_iRegAddress;
00085     \textcolor{keywordtype}{int} m_iRegRead;
00086     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} m_iRegData;
00087 
00088     \textcolor{keywordtype}{int} m_bLoadedProd;
00089     \textcolor{keywordtype}{int} m_bLoadedDebug;
00090     std::string mLoadedProgramFilename;
00091     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} byte_array[max_array_size];
00092     \textcolor{keywordtype}{int} m_iLoopTries;
00093     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} m_IRAM[256];
00094     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} m_SFR[256];
00095     \textcolor{keyword}{static} lms7002_pnlMCU_BD_view* obj_ptr;
00096     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{long} ID_PROGRAMING_STATUS_EVENT;
00097     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{long} ID_PROGRAMING_FINISH_EVENT;
00098 \};
00099 
00100 \textcolor{preprocessor}{#endif // \_\_lms7002\_pnlMCU\_BD\_view\_\_}
\end{DoxyCode}
