\subsection{qa\+\_\+trigger\+\_\+command.\+py}
\label{qa__trigger__command_8py_source}\index{/home/erik/prefix/default/src/gr-\/radar-\/dev/python/qa\+\_\+trigger\+\_\+command.\+py@{/home/erik/prefix/default/src/gr-\/radar-\/dev/python/qa\+\_\+trigger\+\_\+command.\+py}}

\begin{DoxyCode}
00001 \textcolor{comment}{#!/usr/bin/env python}
00002 \textcolor{comment}{# -*- coding: utf-8 -*-}
00003 \textcolor{comment}{# }
00004 \textcolor{comment}{# Copyright 2014 Communications Engineering Lab, KIT.}
00005 \textcolor{comment}{# }
00006 \textcolor{comment}{# This is free software; you can redistribute it and/or modify}
00007 \textcolor{comment}{# it under the terms of the GNU General Public License as published by}
00008 \textcolor{comment}{# the Free Software Foundation; either version 3, or (at your option)}
00009 \textcolor{comment}{# any later version.}
00010 \textcolor{comment}{# }
00011 \textcolor{comment}{# This software is distributed in the hope that it will be useful,}
00012 \textcolor{comment}{# but WITHOUT ANY WARRANTY; without even the implied warranty of}
00013 \textcolor{comment}{# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}
00014 \textcolor{comment}{# GNU General Public License for more details.}
00015 \textcolor{comment}{# }
00016 \textcolor{comment}{# You should have received a copy of the GNU General Public License}
00017 \textcolor{comment}{# along with this software; see the file COPYING.  If not, write to}
00018 \textcolor{comment}{# the Free Software Foundation, Inc., 51 Franklin Street,}
00019 \textcolor{comment}{# Boston, MA 02110-1301, USA.}
00020 \textcolor{comment}{# }
00021 
00022 \textcolor{keyword}{from} gnuradio \textcolor{keyword}{import} gr, gr\_unittest
00023 \textcolor{keyword}{from} gnuradio \textcolor{keyword}{import} blocks
00024 \textcolor{keyword}{import} radar\_swig \textcolor{keyword}{as} radar
00025 \textcolor{keyword}{import} pmt
00026 \textcolor{keyword}{from} time \textcolor{keyword}{import} sleep
00027 
00028 \textcolor{keyword}{class }qa_trigger_command (gr\_unittest.TestCase):
00029 
00030     \textcolor{keyword}{def }setUp (self):
00031         self.tb = gr.top\_block ()
00032 
00033     \textcolor{keyword}{def }tearDown (self):
00034         self.tb = \textcolor{keywordtype}{None}
00035 
00036     \textcolor{keyword}{def }test_001_t (self):
00037         \textcolor{comment}{# set up fg}
00038         Range = (10, 20, 30)
00039         power = (15, 30, 45)
00040         block\_time = 100
00041 
00042         pmt\_range = pmt.list2(pmt.string\_to\_symbol(\textcolor{stringliteral}{'range'}),pmt.init\_f32vector(
      len(Range),Range))
00043         pmt\_power = pmt.list2(pmt.string\_to\_symbol(\textcolor{stringliteral}{'power'}),pmt.init\_f32vector(
      len(power),power))
00044         pmt\_misc = pmt.list2(pmt.string\_to\_symbol(\textcolor{stringliteral}{'misc'}),pmt.init\_f32vector(3,(1,2,3)))
00045         pmt\_in = pmt.list3(pmt\_misc,pmt\_range,pmt\_power)
00046 
00047         src = blocks.message\_strobe(pmt\_in, 100)
00048         test = radar.trigger\_command(\textcolor{stringliteral}{"echo test\_command"},(\textcolor{stringliteral}{"Range"},\textcolor{stringliteral}{"power"}),(5, 10),(35, 50), block\_time)
00049         
00050         self.tb.msg\_connect(src,\textcolor{stringliteral}{"strobe"},test,\textcolor{stringliteral}{"Msg in"})
00051         
00052         self.tb.start()
00053         sleep(0.5)
00054         self.tb.stop()
00055         self.tb.wait()
00056         \textcolor{comment}{# check data}
00057 
00058 
00059 \textcolor{keywordflow}{if} \_\_name\_\_ == \textcolor{stringliteral}{'\_\_main\_\_'}:
00060     gr\_unittest.run(qa\_trigger\_command)\textcolor{comment}{#, "qa\_trigger\_command.xml")}
\end{DoxyCode}
