\subsection{qa\+\_\+split\+\_\+cc.\+py}
\label{qa__split__cc_8py_source}\index{/home/erik/prefix/default/src/gr-\/radar-\/dev/python/qa\+\_\+split\+\_\+cc.\+py@{/home/erik/prefix/default/src/gr-\/radar-\/dev/python/qa\+\_\+split\+\_\+cc.\+py}}

\begin{DoxyCode}
00001 \textcolor{comment}{#!/usr/bin/env python}
00002 \textcolor{comment}{# -*- coding: utf-8 -*-}
00003 \textcolor{comment}{# }
00004 \textcolor{comment}{# Copyright 2014 Communications Engineering Lab, KIT.}
00005 \textcolor{comment}{# }
00006 \textcolor{comment}{# This is free software; you can redistribute it and/or modify}
00007 \textcolor{comment}{# it under the terms of the GNU General Public License as published by}
00008 \textcolor{comment}{# the Free Software Foundation; either version 3, or (at your option)}
00009 \textcolor{comment}{# any later version.}
00010 \textcolor{comment}{# }
00011 \textcolor{comment}{# This software is distributed in the hope that it will be useful,}
00012 \textcolor{comment}{# but WITHOUT ANY WARRANTY; without even the implied warranty of}
00013 \textcolor{comment}{# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}
00014 \textcolor{comment}{# GNU General Public License for more details.}
00015 \textcolor{comment}{# }
00016 \textcolor{comment}{# You should have received a copy of the GNU General Public License}
00017 \textcolor{comment}{# along with this software; see the file COPYING.  If not, write to}
00018 \textcolor{comment}{# the Free Software Foundation, Inc., 51 Franklin Street,}
00019 \textcolor{comment}{# Boston, MA 02110-1301, USA.}
00020 \textcolor{comment}{# }
00021 
00022 \textcolor{keyword}{from} gnuradio \textcolor{keyword}{import} gr, gr\_unittest
00023 \textcolor{keyword}{from} gnuradio \textcolor{keyword}{import} blocks
00024 \textcolor{keyword}{import} radar\_swig \textcolor{keyword}{as} radar
00025 
00026 \textcolor{keyword}{class }qa_split_cc (gr\_unittest.TestCase):
00027 
00028     \textcolor{keyword}{def }setUp (self):
00029         self.tb = gr.top\_block ()
00030 
00031     \textcolor{keyword}{def }tearDown (self):
00032         self.tb = \textcolor{keywordtype}{None}
00033 
00034     \textcolor{keyword}{def }test_001_t (self):
00035         \textcolor{comment}{# set up fg}
00036         samp\_cw = 300
00037         samp\_up = 200
00038         samp\_down = 100
00039         
00040         mult = 3
00041         test\_len = (samp\_cw+samp\_up+samp\_down)*mult
00042         
00043         samp\_rate = 2000
00044         len\_key = \textcolor{stringliteral}{"packet\_len"}
00045         packet\_parts = (samp\_cw, samp\_up, samp\_down)
00046         
00047         src = radar.signal\_generator\_fmcw\_c(samp\_rate, samp\_up, samp\_down, samp\_cw, 500, 250, 1, len\_key);
00048         head = blocks.head(8,test\_len)
00049         split0 = radar.split\_cc(0,packet\_parts,len\_key)
00050         split1 = radar.split\_cc(1,packet\_parts,len\_key)
00051         split2 = radar.split\_cc(2,packet\_parts,len\_key)
00052         snk0 = blocks.vector\_sink\_c()
00053         snk1 = blocks.vector\_sink\_c()
00054         snk2 = blocks.vector\_sink\_c()
00055         
00056         self.tb.connect(src,head)
00057         self.tb.connect(head,split0,snk0)
00058         self.tb.connect(head,split1,snk1)
00059         self.tb.connect(head,split2,snk2)
00060         self.tb.run ()
00061         
00062         \textcolor{comment}{# check data}
00063         self.assertEqual(len(snk0.data()),mult*samp\_cw) \textcolor{comment}{# check correct number of samples in every sink}
00064         self.assertEqual(len(snk1.data()),mult*samp\_up)
00065         self.assertEqual(len(snk2.data()),mult*samp\_down)
00066         
00067     \textcolor{keyword}{def }test_002_t (self):
00068         \textcolor{comment}{# set up fg}
00069         in\_data = (1, 2, 3, 4, 5, 6)
00070         packet\_len = len(in\_data)
00071         
00072         src = blocks.vector\_source\_c(in\_data)
00073         s2ts = blocks.stream\_to\_tagged\_stream(8,1,packet\_len,\textcolor{stringliteral}{"packet\_len"})
00074         split = radar.split\_cc(1,(1,3,2))
00075         snk = blocks.vector\_sink\_c()
00076         
00077         self.tb.connect(src,s2ts,split,snk)
00078         self.tb.run ()
00079         
00080         \textcolor{comment}{# check data}
00081         self.assertTupleEqual(snk.data(),(2,3,4)) \textcolor{comment}{# check if correct data is pushed to output}
00082 
00083 \textcolor{keywordflow}{if} \_\_name\_\_ == \textcolor{stringliteral}{'\_\_main\_\_'}:
00084     gr\_unittest.run(qa\_split\_cc)\textcolor{comment}{#, "qa\_split\_cc.xml")}
\end{DoxyCode}
