\subsection{text.\+py}
\label{text_8py_source}\index{/home/erik/prefix/default/src/gr-\/radar-\/dev/docs/doxygen/doxyxml/text.\+py@{/home/erik/prefix/default/src/gr-\/radar-\/dev/docs/doxygen/doxyxml/text.\+py}}

\begin{DoxyCode}
00001 \textcolor{comment}{#}
00002 \textcolor{comment}{# Copyright 2010 Free Software Foundation, Inc.}
00003 \textcolor{comment}{#}
00004 \textcolor{comment}{# This file is part of GNU Radio}
00005 \textcolor{comment}{#}
00006 \textcolor{comment}{# GNU Radio is free software; you can redistribute it and/or modify}
00007 \textcolor{comment}{# it under the terms of the GNU General Public License as published by}
00008 \textcolor{comment}{# the Free Software Foundation; either version 3, or (at your option)}
00009 \textcolor{comment}{# any later version.}
00010 \textcolor{comment}{#}
00011 \textcolor{comment}{# GNU Radio is distributed in the hope that it will be useful,}
00012 \textcolor{comment}{# but WITHOUT ANY WARRANTY; without even the implied warranty of}
00013 \textcolor{comment}{# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}
00014 \textcolor{comment}{# GNU General Public License for more details.}
00015 \textcolor{comment}{#}
00016 \textcolor{comment}{# You should have received a copy of the GNU General Public License}
00017 \textcolor{comment}{# along with GNU Radio; see the file COPYING.  If not, write to}
00018 \textcolor{comment}{# the Free Software Foundation, Inc., 51 Franklin Street,}
00019 \textcolor{comment}{# Boston, MA 02110-1301, USA.}
00020 \textcolor{comment}{#}
00021 \textcolor{stringliteral}{"""}
00022 \textcolor{stringliteral}{Utilities for extracting text from generated classes.}
00023 \textcolor{stringliteral}{"""}
00024 
00025 \textcolor{keyword}{def }is_string(txt):
00026     \textcolor{keywordflow}{if} isinstance(txt, str):
00027         \textcolor{keywordflow}{return} \textcolor{keyword}{True}
00028     \textcolor{keywordflow}{try}:
00029         \textcolor{keywordflow}{if} isinstance(txt, unicode):
00030             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
00031     \textcolor{keywordflow}{except} NameError:
00032         \textcolor{keywordflow}{pass}
00033     \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00034 
00035 \textcolor{keyword}{def }description(obj):
00036     \textcolor{keywordflow}{if} obj \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
00037         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
00038     \textcolor{keywordflow}{return} description_bit(obj).strip()
00039 
00040 \textcolor{keyword}{def }description_bit(obj):
00041     \textcolor{keywordflow}{if} hasattr(obj, \textcolor{stringliteral}{'content'}):
00042         contents = [description_bit(item) \textcolor{keywordflow}{for} item \textcolor{keywordflow}{in} obj.content]
00043         result = \textcolor{stringliteral}{''}.join(contents)
00044     \textcolor{keywordflow}{elif} hasattr(obj, \textcolor{stringliteral}{'content\_'}):
00045         contents = [description_bit(item) \textcolor{keywordflow}{for} item \textcolor{keywordflow}{in} obj.content\_]
00046         result = \textcolor{stringliteral}{''}.join(contents)
00047     \textcolor{keywordflow}{elif} hasattr(obj, \textcolor{stringliteral}{'value'}):
00048         result = description_bit(obj.value)
00049     \textcolor{keywordflow}{elif} is_string(obj):
00050         \textcolor{keywordflow}{return} obj
00051     \textcolor{keywordflow}{else}:
00052         \textcolor{keywordflow}{raise} StandardError(\textcolor{stringliteral}{'Expecting a string or something with content, content\_ or value attribute'})
00053     \textcolor{comment}{# If this bit is a paragraph then add one some line breaks.}
00054     \textcolor{keywordflow}{if} hasattr(obj, \textcolor{stringliteral}{'name'}) \textcolor{keywordflow}{and} obj.name == \textcolor{stringliteral}{'para'}:
00055         result += \textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)n"}
00056     \textcolor{keywordflow}{return} result
\end{DoxyCode}
