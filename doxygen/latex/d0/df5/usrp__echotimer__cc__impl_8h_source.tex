\subsection{usrp\+\_\+echotimer\+\_\+cc\+\_\+impl.\+h}
\label{usrp__echotimer__cc__impl_8h_source}\index{/home/erik/prefix/default/src/gr-\/radar-\/dev/lib/usrp\+\_\+echotimer\+\_\+cc\+\_\+impl.\+h@{/home/erik/prefix/default/src/gr-\/radar-\/dev/lib/usrp\+\_\+echotimer\+\_\+cc\+\_\+impl.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{/* -*- c++ -*- */}
00002 \textcolor{comment}{/* }
00003 \textcolor{comment}{ * Copyright 2014 Communications Engineering Lab, KIT.}
00004 \textcolor{comment}{ * }
00005 \textcolor{comment}{ * This is free software; you can redistribute it and/or modify}
00006 \textcolor{comment}{ * it under the terms of the GNU General Public License as published by}
00007 \textcolor{comment}{ * the Free Software Foundation; either version 3, or (at your option)}
00008 \textcolor{comment}{ * any later version.}
00009 \textcolor{comment}{ * }
00010 \textcolor{comment}{ * This software is distributed in the hope that it will be useful,}
00011 \textcolor{comment}{ * but WITHOUT ANY WARRANTY; without even the implied warranty of}
00012 \textcolor{comment}{ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}
00013 \textcolor{comment}{ * GNU General Public License for more details.}
00014 \textcolor{comment}{ * }
00015 \textcolor{comment}{ * You should have received a copy of the GNU General Public License}
00016 \textcolor{comment}{ * along with this software; see the file COPYING.  If not, write to}
00017 \textcolor{comment}{ * the Free Software Foundation, Inc., 51 Franklin Street,}
00018 \textcolor{comment}{ * Boston, MA 02110-1301, USA.}
00019 \textcolor{comment}{ */}
00020  
00021 \textcolor{preprocessor}{#ifndef INCLUDED\_RADAR\_USRP\_ECHOTIMER\_CC\_IMPL\_H}
00022 \textcolor{preprocessor}{#define INCLUDED\_RADAR\_USRP\_ECHOTIMER\_CC\_IMPL\_H}
00023 
00024 \textcolor{preprocessor}{#include <radar/usrp_echotimer_cc.h>}
00025 
00026 \textcolor{preprocessor}{#include <uhd/utils/thread\_priority.hpp>}
00027 \textcolor{preprocessor}{#include <uhd/usrp/multi\_usrp.hpp>}
00028 
00029 \textcolor{keyword}{namespace }gr \{
00030   \textcolor{keyword}{namespace }radar \{
00031 
00032     \textcolor{keyword}{class }usrp_echotimer_cc_impl : \textcolor{keyword}{public} usrp_echotimer_cc
00033     \{
00034      \textcolor{keyword}{private}:
00035       \textcolor{comment}{// Nothing to declare in this block.}
00036 
00037      \textcolor{keyword}{protected}:
00038       \textcolor{keywordtype}{int} calculate_output_stream_length(\textcolor{keyword}{const} gr\_vector\_int &ninput\_items);
00039 
00040      \textcolor{keyword}{public}:
00041       usrp_echotimer_cc_impl(\textcolor{keywordtype}{int} samp_rate, \textcolor{keywordtype}{float} center_freq, \textcolor{keywordtype}{int} num\_delay\_samps,
00042         std::string args\_tx, std::string wire\_tx, std::string clock\_source\_tx, 
      std::string time\_source\_tx, std::string antenna\_tx, \textcolor{keywordtype}{float} gain\_tx,
00043         \textcolor{keywordtype}{float} timeout\_tx, \textcolor{keywordtype}{float} wait\_tx, \textcolor{keywordtype}{float} lo\_offset\_tx,
00044         std::string args\_rx, std::string wire\_rx, std::string clock\_source\_rx, 
      std::string time\_source\_rx, std::string antenna\_rx, \textcolor{keywordtype}{float} gain\_rx,
00045         \textcolor{keywordtype}{float} timeout\_rx, \textcolor{keywordtype}{float} wait\_rx, \textcolor{keywordtype}{float} lo\_offset\_rx,
00046         \textcolor{keyword}{const} std::string& len\_key);
00047       ~usrp_echotimer_cc_impl();
00048       \textcolor{keywordtype}{void} send();
00049       \textcolor{keywordtype}{void} receive();
00050       \textcolor{keywordtype}{void} set_num_delay_samps(\textcolor{keywordtype}{int} num\_samps);
00051       \textcolor{keywordtype}{void} set_rx_gain(\textcolor{keywordtype}{float} gain);
00052       \textcolor{keywordtype}{void} set_tx_gain(\textcolor{keywordtype}{float} gain);
00053       
00054       \textcolor{keywordtype}{int} d_samp_rate;
00055       \textcolor{keywordtype}{float} d_center_freq;
00056       \textcolor{keywordtype}{int} d_num_delay_samps;
00057       std::vector<gr\_complex> d_out_buffer;
00058       
00059       std::string d_args_tx, d_args_rx;
00060       std::string d_clock_source_tx, d_clock_source_rx;
00061       std::string d_wire_tx, d_wire_rx;
00062       std::string d_antenna_tx, d_antenna_rx;
00063       std::string d_time_source_tx, d_time_source_rx;
00064       uhd::usrp::multi\_usrp::sptr d_usrp_tx, d_usrp_rx;
00065       uhd::tune\_request\_t d_tune_request_tx, d_tune_request_rx;
00066       uhd::tx\_streamer::sptr d_tx_stream;
00067       uhd::rx\_streamer::sptr d_rx_stream;
00068       uhd::tx\_metadata\_t d_metadata_tx;
00069       uhd::rx\_metadata\_t d_metadata_rx;
00070       \textcolor{keywordtype}{double} d_lo_offset_tx, d_lo_offset_rx;
00071       \textcolor{keywordtype}{float} d_timeout_tx, d_timeout_rx;
00072       \textcolor{keywordtype}{float} d_wait_tx, d_wait_rx;
00073       \textcolor{keywordtype}{float} d_gain_tx, d_gain_rx;
00074       
00075       uhd::time\_spec\_t d_time_now_tx, d_time_now_rx;
00076       
00077       gr::thread::thread d_thread_recv;
00078       gr\_complex *d_out_recv;
00079       \textcolor{keywordtype}{int} d_noutput_items_recv;
00080       pmt::pmt\_t d_time_key, d_time_val, d_srcid;
00081       
00082       gr::thread::thread d_thread_send;
00083       gr\_complex *d_in_send;
00084       \textcolor{keywordtype}{int} d_noutput_items_send;
00085 
00086       \textcolor{comment}{// Where all the action really happens}
00087       \textcolor{keywordtype}{int} work(\textcolor{keywordtype}{int} noutput\_items,
00088                gr\_vector\_int &ninput\_items,
00089                gr\_vector\_const\_void\_star &input\_items,
00090                gr\_vector\_void\_star &output\_items);
00091     \};
00092 
00093   \} \textcolor{comment}{// namespace radar}
00094 \} \textcolor{comment}{// namespace gr}
00095 
00096 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* INCLUDED\_RADAR\_USRP\_ECHOTIMER\_CC\_IMPL\_H */}\textcolor{preprocessor}{}
00097 
\end{DoxyCode}
